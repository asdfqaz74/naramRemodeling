var re=Object.defineProperty;var se=(a,e,t)=>e in a?re(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var T=(a,e,t)=>(se(a,typeof e!="symbol"?e+"":e,t),t);import{u as ie,j as m}from"./index-BQNV57zS.js";import{r as c,a as E}from"./react-Cu9bd8lq.js";import{a as le}from"./reactDom-CkgO_r3j.js";const ce=ie.div`
  color: '#000';
  height: 'auto';
  padding: 0.5rem;
`,R=typeof window<"u"&&typeof document<"u"?c.useLayoutEffect:c.useEffect,f=(a,e,t)=>{R(()=>{if(!a||!t)return;const n=function(){for(var s=arguments.length,d=new Array(s),o=0;o<s;o++)d[o]=arguments[o];return d===void 0?t(a):t(a,...d)};return kakao.maps.event.addListener(a,e,n),()=>{kakao.maps.event.removeListener(a,e,n)}},[a,e,t])},W="__react-kakao-maps-sdk__";let z=function(a){return a[a.INITIALIZED=0]="INITIALIZED",a[a.LOADING=1]="LOADING",a[a.SUCCESS=2]="SUCCESS",a[a.FAILURE=3]="FAILURE",a}({});const de=`${W}_Loader`,l=class l{constructor(e){T(this,"callbacks",[]);T(this,"done",!1);T(this,"loading",!1);T(this,"errors",[]);let{appkey:t,id:n=de,libraries:s=[],nonce:d,retries:o=3,url:y="//dapi.kakao.com/v2/maps/sdk.js"}=e;if(this.id=n,this.appkey=t,this.libraries=s,this.nonce=d,this.retries=o,this.url=y,l.instance&&!l.equalOptions(this.options,l.instance.options)&&!l.equalOptions(this.options,l.instance.options))switch(l.instance.status){case z.FAILURE:throw new Error(`Loader must not be called again with different options. 
${JSON.stringify(this.options,null,2)}
!==
${JSON.stringify(l.instance.options,null,2)}`);default:l.instance.reset(),l.instance=this;break}return l.instance||(l.instance=this),l.instance}get options(){return{appkey:this.appkey,id:this.id,libraries:this.libraries,nonce:this.nonce,retries:this.retries,url:this.url}}static addLoadEventLisnter(e){return window.kakao&&window.kakao.maps&&window.kakao.maps.load(e),l.loadEventCallback.add(e),e}static removeLoadEventLisnter(e){return l.loadEventCallback.delete(e)}load(){return new Promise((e,t)=>{this.loadCallback(n=>{n?t(n):e(window.kakao)})})}get status(){return this.onEvent?z.FAILURE:this.done?z.SUCCESS:this.loading?z.LOADING:z.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}loadCallback(e){this.callbacks.push(e),this.execute()}resetIfRetryingFailed(){this.failed&&this.reset()}reset(){this.deleteScript(),this.done=!0,this.loading=!1,this.errors=[],this.onEvent=void 0}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.kakao&&window.kakao.maps){console.warn("Kakao Maps이 이미 외부 요소에 의해 로딩되어 있습니다.설정한 옵션과 일치 하지 않을 수 있으며, 이에 따른 예상치 동작이 발생할 수 있습니다."),window.kakao.maps.load(this.callback);return}this.loading||(this.loading=!0,this.setScript())}}setScript(){document.getElementById(this.id)&&this.callback();const e=this.createUrl(),t=document.createElement("script");t.id=this.id,t.type="text/javascript",t.src=e,t.onerror=this.loadErrorCallback.bind(this),t.onload=this.callback.bind(this),t.defer=!0,t.async=!0,this.nonce&&(t.nonce=this.nonce),document.head.appendChild(t)}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const t=this.errors.length*2**this.errors.length;console.log(`Failed to load Kakao Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.done=!0,this.loading=!1,this.onEvent=this.errors[this.errors.length-1],this.callbacks.forEach(t=>{t(this.onEvent)}),this.callbacks=[],l.loadEventCallback.forEach(t=>{t(this.onEvent)})}createUrl(){let e=this.url;return e+=`?appkey=${this.appkey}`,this.libraries.length&&(e+=`&libraries=${this.libraries.join(",")}`),e+="&autoload=false",e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}callback(){kakao.maps.load(()=>{l.instance.done=!0,l.instance.loading=!1,l.instance.callbacks.forEach(e=>{e(l.instance.onEvent)}),l.instance.callbacks=[],l.loadEventCallback.forEach(e=>{e(l.instance.onEvent)})})}static equalOptions(e,t){if(e.appkey!==t.appkey||e.id!==t.id||e.libraries.length!==t.libraries.length)return!1;for(let n=0;n<e.libraries.length;++n)if(e.libraries[n]!==t.libraries[n])return!1;return!(e.nonce!==t.nonce||e.retries!==t.retries||e.url!==t.url)}};T(l,"loadEventCallback",new Set);let J=l;const u=function(a,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),s=2;s<t;s++)n[s-2]=arguments[s];R(()=>{!a||n.every(d=>typeof d>"u")||a[e].call(a,...n)},[a,e,...n])},_=E.createContext(void 0),pe=E.forwardRef(function(e,t){let{id:n,as:s,children:d,center:o,isPanto:y=!1,padding:M=32,disableDoubleClick:p,disableDoubleClickZoom:k,draggable:b,zoomable:w,keyboardShortcuts:I,level:h,maxLevel:A,minLevel:Q,mapTypeId:v,projectionId:L,scrollwheel:P,tileAnimation:j,onBoundsChanged:x,onCenterChanged:Z,onClick:i,onDoubleClick:D,onDrag:H,onDragEnd:U,onDragStart:O,onIdle:F,onMaptypeidChanged:K,onMouseMove:N,onRightClick:G,onTileLoaded:$,onZoomChanged:q,onZoomStart:B,onCreate:S,...ee}=e;const te=s||"div",[V,ne]=c.useState(!1),[r,ae]=c.useState(),Y=c.useRef(null);return R(()=>{const g=J.addLoadEventLisnter(C=>ne(!C));return()=>{J.removeLoadEventLisnter(g)}},[]),R(()=>{if(!V)return;const g=Y.current;if(!g)return;const C="lat"in o?new kakao.maps.LatLng(o.lat,o.lng):new kakao.maps.Coords(o.x,o.y),oe=new kakao.maps.Map(g,{center:C,disableDoubleClick:p,disableDoubleClickZoom:k,draggable:b,keyboardShortcuts:I,level:h,mapTypeId:typeof v=="string"?kakao.maps.MapTypeId[v]:v,projectionId:L,scrollwheel:P,tileAnimation:j});return ae(oe),()=>{g.innerHTML=""}},[V,p,k,j]),c.useImperativeHandle(t,()=>r,[r]),R(()=>{!r||!S||S(r)},[r,S]),R(()=>{if(!r)return;let g=r.getCenter();g instanceof kakao.maps.Coords&&(g=g.toLatLng());const C="lat"in o?new kakao.maps.LatLng(o.lat,o.lng):new kakao.maps.Coords(o.x,o.y);C instanceof kakao.maps.LatLng&&C.equals(g)||C instanceof kakao.maps.Coords&&C.toLatLng().equals(g)||(y?r.panTo(C,M):r.setCenter(C))},[r,o.lat,o.lng,o.x,o.y]),u(r,"setDraggable",b),u(r,"setZoomable",w),u(r,"setKeyboardShortcuts",I),u(r,"setLevel",h),u(r,"setMapTypeId",V?typeof v=="string"?kakao.maps.MapTypeId[v]:v:void 0),u(r,"setProjectionId",L),u(r,"setMinLevel",A),u(r,"setMaxLevel",Q),f(r,"bounds_changed",x),f(r,"center_changed",Z),f(r,"click",i),f(r,"dblclick",D),f(r,"drag",H),f(r,"dragstart",O),f(r,"dragend",U),f(r,"idle",F),f(r,"maptypeid_changed",K),f(r,"mousemove",N),f(r,"rightclick",G),f(r,"tilesloaded",$),f(r,"zoom_changed",q),f(r,"zoom_start",B),m.jsxs(m.Fragment,{children:[m.jsx(te,{id:n||`${W}_Map`,...ee,ref:Y}),r&&m.jsx(_.Provider,{value:r,children:d})]})}),X=a=>{const e=c.useContext(_);if(!e)throw new Error(`${a?a+" Component":"useMap"} must exist inside Map Component!`);return e},ue=E.forwardRef(function(e,t){let{map:n,position:s,marker:d,children:o,altitude:y,disableAutoPan:M,range:p,removable:k,zIndex:b,onCreate:w}=e;const I=c.useRef(document.createElement("div")),h=c.useMemo(()=>{const A=new kakao.maps.InfoWindow({altitude:y,disableAutoPan:M,range:p,removable:k,zIndex:b,content:I.current,position:s});return I.current.style.display="none",A},[M,k]);return c.useImperativeHandle(t,()=>h,[h]),c.useLayoutEffect(()=>(h.open(n,d),()=>{h.close()}),[n,d]),c.useLayoutEffect(()=>{w&&w(h)},[h,w]),u(h,"setPosition",s),u(h,"setAltitude",y),u(h,"setRange",p),u(h,"setZIndex",b),I.current.parentElement&&le.createPortal(o,I.current.parentElement)}),ke=E.createContext(void 0),fe=E.forwardRef(function(e,t){let{map:n,position:s,children:d,altitude:o,clickable:y,draggable:M,image:p,infoWindowOptions:k,onCreate:b,onClick:w,onDragEnd:I,onDragStart:h,onMouseOut:A,onMouseOver:Q,opacity:v,range:L,title:P,zIndex:j}=e;const x=c.useContext(ke),Z=c.useMemo(()=>{var D,H,U,O,F,K,N,G,$,q,B,S;return p&&new kakao.maps.MarkerImage(p.src,new kakao.maps.Size(p.size.width,p.size.height),{alt:(D=p.options)==null?void 0:D.alt,coords:(H=p.options)==null?void 0:H.coords,offset:((U=p.options)==null?void 0:U.offset)&&new kakao.maps.Point((O=p.options)==null?void 0:O.offset.x,(F=p.options)==null?void 0:F.offset.y),shape:(K=p.options)==null?void 0:K.shape,spriteOrigin:((N=p.options)==null?void 0:N.spriteOrigin)&&new kakao.maps.Point((G=p.options)==null?void 0:G.spriteOrigin.x,($=p.options)==null?void 0:$.spriteOrigin.y),spriteSize:((q=p.options)==null?void 0:q.spriteSize)&&new kakao.maps.Size((B=p.options)==null?void 0:B.spriteSize.width,(S=p.options)==null?void 0:S.spriteSize.height)})},[JSON.stringify(p)]),i=c.useMemo(()=>new kakao.maps.Marker({altitude:o,clickable:y,draggable:M,image:Z,opacity:v,range:L,title:P,zIndex:j,position:s}),[]);return c.useImperativeHandle(t,()=>i,[i]),c.useLayoutEffect(()=>x?(x.addMarker(i,!0),()=>x.removeMarker(i,!0)):(i.setMap(n),()=>i.setMap(null)),[n,x,i]),c.useLayoutEffect(()=>{b&&b(i)},[i,b]),u(i,"setPosition",s),u(i,"setImage",Z),u(i,"setAltitude",o),u(i,"setClickable",y),u(i,"setDraggable",M),u(i,"setOpacity",v),u(i,"setRange",L),u(i,"setRange",L),u(i,"setTitle",P),u(i,"setTitle",P),u(i,"setZIndex",j),f(i,"click",w),f(i,"dragstart",h),f(i,"dragend",I),f(i,"mouseout",A),f(i,"mouseover",Q),d?m.jsx(ue,{position:s,map:n,marker:i,altitude:k==null?void 0:k.altitude,disableAutoPan:k==null?void 0:k.disableAutoPan,range:k==null?void 0:k.range,removable:k==null?void 0:k.removable,zIndex:k==null?void 0:k.zIndex,children:d}):null}),he=E.forwardRef(function(e,t){let{position:n,...s}=e;const d=X("MapMarker"),o=c.useMemo(()=>"lat"in n?new kakao.maps.LatLng(n.lat,n.lng):new kakao.maps.Coords(n.x,n.y).toLatLng(),[n.lat,n.lng,n.x,n.y]);return m.jsx(fe,{map:d,position:o,...s,ref:t})}),me=E.forwardRef(function(e,t){let{position:n=kakao.maps.ControlPosition.TOPRIGHT}=e;const s=X("MapTypeControl"),d=typeof n=="string"?kakao.maps.ControlPosition[n]:n,o=c.useMemo(()=>new kakao.maps.MapTypeControl,[]);return c.useImperativeHandle(t,()=>o,[o]),c.useLayoutEffect(()=>(s.addControl(o,d),()=>{s.removeControl(d)}),[s,o,d]),null}),ge=E.forwardRef(function(e,t){let{position:n=kakao.maps.ControlPosition.RIGHT}=e;const s=X("ZoomControl"),d=typeof n=="string"?kakao.maps.ControlPosition[n]:n,o=c.useMemo(()=>new kakao.maps.ZoomControl,[]);return c.useImperativeHandle(t,()=>o,[o]),c.useLayoutEffect(()=>(s.addControl(o,d),()=>{s.removeControl(o)}),[s,d,o]),null});function ve({width:a,level:e,firstContent:t,secondContent:n}){return m.jsx("div",{style:{width:a||"100%"},children:m.jsxs(pe,{id:"map",center:{lat:36.966125,lng:127.517545},style:{width:"100%",height:"600px"},level:e||4,draggable:!0,zoomable:!0,children:[m.jsx(me,{position:"TOPRIGHT"}),m.jsx(ge,{position:"RIGHT"}),m.jsx(he,{position:{lat:36.966125,lng:127.517545},children:m.jsxs(ce,{children:[m.jsx("a",{href:"https://map.kakao.com/link/map/나람사료,36.966125,127.517545",style:{color:"blue"},target:"_blank",rel:"noreferrer",children:t||"(주) 나람사료"})," ",m.jsx("a",{href:"https://map.kakao.com/link/to/Hello World!,36.966125,127.517545",style:{color:"blue"},target:"_blank",rel:"noreferrer",children:n})]})})]})})}export{ve as K};
